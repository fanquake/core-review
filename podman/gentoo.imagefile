FROM gentoo/stage3:arm64-musl-hardened

RUN emerge-webrsync && emerge --sync && emerge \
    boost \
    capnproto \
    ccache \
    cmake \
    dev-vcs/git \
    libevent \
    vim \
    zeromq

RUN git clone https://github.com/bitcoin/bitcoin && mkdir bitcoin/depends/SDKs

RUN make download -C bitcoin/depends

WORKDIR /bitcoin
